# 2023.10.16

- 예약 기능 및 예약 조회 만들기
    - 로그인 후 로컬 스토리지에 남는 정보를 이용
    - 예약 페이지에서 입력한 정보를 db.json에 저장
    - 예약 정보를 저장시 유저의 닉네임을 같이 저장
    - 예약 정보에 저장되는 닉네임은 로컬 스토리지에 저장되어있는 닉네임 이용
    - 예약 정보에 닉네임이 있으니 예약 조회시 로컬에 저장된 닉네임을 가지고 매칭 시켜 예약 정보를 찾는다
    - 예약정보의 날짜를 예약조회의 타이틀로 이용

- 오늘 할 것의 우선 순위
    - 예약정보를 db.json에 저장
    - 로컬스토리지에 저장된 닉네임 불러오기
    - 불러온 닉네임을 같이 저장
    - 닉네임 매칭을 이용해 예쟉정보 불러오기

- 문제 발생 및 해결
    - 예약 페이지에 객실을 선택하는 폼을 안 만들었다는 것을 알았다 그래서 만들다
        
        select와 option을 사용할때 발생한 문제를 작성 후 해결한 방법을 작성하려 한다.
        
        문제 
        
        option의 첫번째가 반드시 노출이 된다 이 때문에 처음 option은 방이름이 아닌 선택해달라는 문구여야 된다 그리고 선택이 되는 문제로 인해 유저가 예약할 때 첫번째 option을 선택하면 그대로 저장이된다
        
        해결방법
        
        간단하게 첫번째 option에 hidden을 붙혀 주면된다.
        
        이로인해 첫번째 option은 placeholder와 같은 방식으로 사용할수 있게되고
        
        유저가 선택을 할 수 없게 된다 
        

- 예약 페이지 만들때 문제 및 해결
    - db.json에 저장까지는 회원가입과 비슷하니 별 어려움은 없었다
        
        그러나 날짜를 저장할때 2023-11-01T00000000 이런 식으로 T이후 0으로 이루어진 시간이 들어가게되었다
        
        - 문제 원하지 않은 시간이 같이 저장됨
        
        - 해결
            - 아래와 같이 toISOString().split('T')[0] 이 코드를 붙혀 잘라버렸다 그러니 시간이 삭제 되는것을 볼 수 있었다.
            
            ```
            checkin: checkinDate.toISOString().split('T')[0],
            checkout: checkoutDate.toISOString().split('T')[0],
            ```
            
            - 부가 달력의 날짜를 현재 날짜이전을 선택하지 못하게 할려했는데
                
                못하고 있다 단순히 min{}안에 new Date()를 집어 넣으면된다는것을 찾아 집어 넣었더니 성공했다
                
- 예약 확인 페이지 문제 및 해결
    - 내가 구상했던것은 예약시 로컬의 닉네임을 불러와 같이 저장하고
        
        불러올때 로컬스토리지에 저장된 닉네임과 db.json에 저장된 닉네임이 일치하는 것만 불러오게 하는것이 목적이었다
        
        - 문제 db.json은 불러오지만 정작 뿌려주지 못한다
        
        - 해결
            - 정말 단순한 문제였는데 다시는 이러지 말자 라는 차원으로 쓴다 스펠링과 대문자 소문자 구분을 확실히 규칙을 정해 사용하자

- Glitch를 이용해 json-server를 배포하고 versel을 이용해 프로잭트 배포
    - 아래의 사이트를 참고하여 진행하며 발생한 문제 및 해결방법을 작성한다
        - 참고 사이트
            - [https://velog.io/@elle2elle/Redux-배포](https://velog.io/@elle2elle/Redux-%EB%B0%B0%ED%8F%AC)
        - 문제
            - 위의 사이트를 따라서 했지만 로컬에서도 배포한 versel에서도 작동이 안됬다
            - 문제는 404코드가 뜬다는것 글리치에서 배포한 json-server가 연결이 안되는 거 같았다
    
    - 해결방법
        - 구글링을 하다 찾은 사이트를 참고하여 해결하였다
            - 참고 사이트
                - [https://velog.io/@kyw0716/Next.js-.env-환경-변수-설정](https://velog.io/@kyw0716/Next.js-.env-%ED%99%98%EA%B2%BD-%EB%B3%80%EC%88%98-%EC%84%A4%EC%A0%95)
        - 처음에는 환경변수 .env 때문인줄알고 찾아 보다가 그게 아니라는것을 찾았다
        - 우선 처음 참고한 사이트는 리액트 배포였다 그로인한 문제 였는데
            
            json-server를 글리치에 배포후 그것을 연동하기 위해 기존 json-server를 변경해 줘야 했다 변경할 때 url이였던 부분을 REACT_APP_변수명 이 형식으로 바꾸는데 이것은 
            
            리액트에서만 되는것이고 NEXT.JS에서는 NEXT_PUBLIC_변수명 이라 해주어야 되는 것이 었다. 
            
        - 수정 후 다시 해보니 잘 작동하여 해결하였다
    

# 오늘 한것

- 예약기능
- 예약 확인
- json-server배포
- versel배포
